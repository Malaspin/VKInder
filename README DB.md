# üóÑÔ∏è –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è VKinder Bot

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL, –≤–∫–ª—é—á–∞—é—â–∞—è:
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
- **API** - –ø—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–æ–¥–æ–º
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ PostgreSQL**
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ë–î
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ PostgreSQL
```bash
# PostgreSQL –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
python db_cli.py postgres-start
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```bash
python db_cli.py create
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤
```bash
python database_examples.py
```

### 6. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ë–î
```bash
python db_cli.py info
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ database_interface.py          # –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ë–î
‚îú‚îÄ‚îÄ db_api.py                      # API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ db_cli.py                      # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ database_examples.py           # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test_database_simulation.py    # –¢–µ—Å—Ç–æ–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îú‚îÄ‚îÄ env.example                   # –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îú‚îÄ‚îÄ .gitignore                    # –ò—Å–∫–ª—é—á–µ–Ω–∏—è Git
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### DatabaseInterface
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ PostgreSQL**

### PostgreSQLManager
–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PostgreSQL:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PostgreSQL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Homebrew
- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ PostgreSQL

### CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (db_cli.py)
–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î
python db_cli.py info

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
python db_cli.py create

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
python db_cli.py drop

# –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
python db_cli.py clear <table>

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
python db_cli.py clear-all

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python db_cli.py test-data

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
python db_cli.py logs --limit 10
python db_cli.py logs --user 123456
python db_cli.py logs --level error

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python db_cli.py messages 123456 --limit 20

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python db_cli.py favorites 123456
```

#### –ö–æ–º–∞–Ω–¥—ã PostgreSQL
```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL
python db_cli.py postgres-start     # –ó–∞–ø—É—Å–∫ PostgreSQL
python db_cli.py postgres-stop      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
python db_cli.py postgres-restart   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PostgreSQL
python db_cli.py postgres-status    # –°—Ç–∞—Ç—É—Å PostgreSQL
python db_cli.py postgres-info      # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PostgreSQL
```

### API (db_api.py)
–ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```python
from db_api import *

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
if test_database():
    print("‚úÖ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç")

# –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
create_database()

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
drop_database()

# –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
clear_table("bot_logs")

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
clear_all_tables()

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î
info = get_database_info()
print(f"–¢–∞–±–ª–∏—Ü: {info['total_tables']}")
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
add_user(123456, "–ò–≤–∞–Ω", "–ü–µ—Ç—Ä–æ–≤", 30, 2, "–ú–æ—Å–∫–≤–∞", "–†–æ—Å—Å–∏—è", "photo_url")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = get_user(123456)
if user:
    print(f"–ù–∞–π–¥–µ–Ω: {user['first_name']} {user['last_name']}")

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
update_user(123456, age=31, city="–°–ü–±")

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
delete_user(123456)
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
log_info("–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞")
log_error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")
log_debug("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
log_warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")

# –õ–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
log_info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à–µ–ª –≤ –±–æ—Ç–∞", 123456)
log_debug("–ù–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞", 123456)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
logs = get_logs(user_id=123456, limit=10)
error_logs = get_logs(level="error", limit=5)
```

#### –°–æ–æ–±—â–µ–Ω–∏—è
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
add_message(123456, "command", "/start")
add_message(123456, "response", "–ü—Ä–∏–≤–µ—Ç!")

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
messages = get_user_messages(123456, limit=20)
```

#### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
add_favorite(123456, 789012)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
favorites = get_favorites(123456)

# –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
remove_favorite(123456, 789012)
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL
```python
# –ó–∞–ø—É—Å–∫ PostgreSQL
start_postgresql()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
check_postgresql_status()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
get_postgresql_info()

# –ì–∞—Ä–∞–Ω—Ç–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
ensure_postgresql_ready()
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã:
1. **vk_users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ VK
2. **photos** - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **favorites** - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
4. **blacklisted** - –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫
5. **search_history** - –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞
6. **user_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
7. **bot_logs** - –õ–æ–≥–∏ –±–æ—Ç–∞
8. **bot_messages** - –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:
- **vk_users**: vk_user_id, first_name, last_name, age, sex, city, country, photo_url
- **bot_logs**: vk_user_id, log_level, log_message, created_at
- **bot_messages**: vk_user_id, message_type, message_text, sent_at
- **favorites**: user_vk_id, favorite_vk_id, created_at

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `vk_user_id`: `int` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è VK
- `first_name`: `str` - –ò–º—è
- `last_name`: `str` - –§–∞–º–∏–ª–∏—è
- `age`: `int` - –í–æ–∑—Ä–∞—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `sex`: `int` - –ü–æ–ª: 1 - –∂–µ–Ω—Å–∫–∏–π, 2 - –º—É–∂—Å–∫–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `city`: `str` - –ì–æ—Ä–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `country`: `str` - –°—Ç—Ä–∞–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `photo_url`: `str` - URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `"command"` - –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `"response"` - –û—Ç–≤–µ—Ç –±–æ—Ç–∞
- `"error"` - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

#### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `"info"` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `"debug"` - –û—Ç–ª–∞–¥–∫–∞
- `"error"` - –û—à–∏–±–∫–∞
- `"warning"` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤
```bash
python database_examples.py
```

### –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
```bash
python test_database_simulation.py
```

### CLI –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
python db_cli.py info
python db_cli.py logs --limit 5
python db_cli.py messages 123456
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –í—Å–µ –ª–æ–≥–∏
python db_cli.py logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python db_cli.py logs --user 123456

# –õ–æ–≥–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
python db_cli.py logs --level error
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π:
```bash
# –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python db_cli.py messages 123456 --limit 10
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
python db_cli.py info
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –§–∞–π–ª .env
```env
# PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DB_HOST=localhost
DB_PORT=5432
DB_NAME=vkinder_db
DB_USER=vkinder_user
DB_PASSWORD=vkinder123
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—ã
createdb vkinder_db
createuser vkinder_user
psql -c "ALTER USER vkinder_user PASSWORD 'vkinder123';"
psql -c "GRANT ALL PRIVILEGES ON DATABASE vkinder_db TO vkinder_user;"
```

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```bash
python db_cli.py create
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
python db_cli.py clear bot_logs
python db_cli.py clear-all
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```bash
python db_cli.py drop
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```python
from db_api import add_user, log_info

# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
success = add_user(
    vk_user_id=123456,
    first_name="–ê–Ω–Ω–∞",
    last_name="–ò–≤–∞–Ω–æ–≤–∞",
    age=25,
    sex=1,  # 1 - –∂–µ–Ω—Å–∫–∏–π, 2 - –º—É–∂—Å–∫–æ–π
    city="–ú–æ—Å–∫–≤–∞"
)

if success:
    log_info("–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω", 123456)
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
```python
from db_api import log_info, log_error, log_debug

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
log_info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
log_debug("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞")

# –õ–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
log_info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –ø–æ–∏—Å–∫", user_id)
log_error("–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π", user_id)
```

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
```python
from db_api import add_message

# –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
add_message(user_id, "command", "/start")

# –û—Ç–≤–µ—Ç –±–æ—Ç–∞
add_message(user_id, "response", "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ VKinder Bot!")
```

### 4. –†–∞–±–æ—Ç–∞ —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º
```python
from db_api import add_favorite, get_favorites, remove_favorite

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
add_favorite(user_id, favorite_id)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
favorites = get_favorites(user_id)
for fav in favorites:
    print(f"–ò–∑–±—Ä–∞–Ω–Ω—ã–π: {fav['favorite_vk_id']}")

# –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
remove_favorite(user_id, favorite_id)
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–¥–æ–º

### –í main.py –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö:
```python
from db_api import log_info, log_error, add_user, add_message

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
log_info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
log_error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VK API")

# –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
add_user(user_id, first_name, last_name, age, sex, city)
add_message(user_id, "response", "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ VKinder Bot!")
```

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PostgreSQL
brew services list | grep postgresql
brew services start postgresql

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLI –∫–æ–º–∞–Ω–¥—ã
python db_cli.py postgres-status
python db_cli.py postgres-start
```

### –û—à–∏–±–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
python setup_postgresql_auto.py
```

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```bash
python db_cli.py drop
python db_cli.py create
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π —Ç–∞–±–ª–∏—Ü
4. **–°–µ—Å—Å–∏–∏ SQLAlchemy**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–µ—Å—Å–∏–π
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç bool –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üìà –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CRUD** –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ —Å–∏–º—É–ª—è—Ü–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ PostgreSQL**
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL —á–µ—Ä–µ–∑ API**
- ‚úÖ **CLI –∫–æ–º–∞–Ω–¥—ã –¥–ª—è PostgreSQL**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î**

## üÜò –ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
python db_cli.py info
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
python db_cli.py logs --limit 10
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤
```bash
python database_examples.py
```

### –°–ø—Ä–∞–≤–∫–∞ –ø–æ CLI
```bash
python db_cli.py --help
```

---